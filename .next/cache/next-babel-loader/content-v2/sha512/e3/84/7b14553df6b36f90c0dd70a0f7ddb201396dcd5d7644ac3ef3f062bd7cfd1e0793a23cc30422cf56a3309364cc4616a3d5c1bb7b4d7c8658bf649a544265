{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/opt/js/storage_sys/contexts/models/data.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect, useCallback } from 'react';\nconst ContextData = /*#__PURE__*/React.createContext();\n\nfunction ProviderData(props) {\n  const {\n    0: listRecords,\n    1: setListRecords\n  } = useState([]);\n  const {\n    0: checkAll,\n    1: setCheckAll\n  } = useState(false);\n  const elCheckAll = useCallback(el => {\n    if (el) {\n      if (checkAll === null) {\n        el.indeterminate = true;\n      } else {\n        el.indeterminate = false;\n      }\n    }\n  }, [checkAll]);\n\n  const toggleCheck = (ids = []) => {\n    ids = ids.length ? ids : listRecords.filter(item => checkAll === null ? Boolean(item.selected) : !checkAll != Boolean(item.selected)).map(item => item.id);\n    let newListRecords = listRecords.map(item => ids.includes(item.id) ? _objectSpread(_objectSpread({}, item), {}, {\n      selected: !item.selected\n    }) : item);\n    let selectedRecords = newListRecords.filter(item => item.selected);\n    setCheckAll(selectedRecords.length < newListRecords.length ? selectedRecords.length ? null : false : !checkAll);\n    setListRecords(newListRecords);\n  };\n\n  const getData = async (slug = []) => {\n    let {\n      entries\n    } = await fetch(`/api/get-list-folder/${slug.join('/')}`).then(res => res.json());\n\n    if (entries) {\n      setListRecords(entries);\n      setCheckAll(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(ContextData.Provider, {\n    value: {\n      listRecords,\n      setListRecords,\n      checkAll,\n      setCheckAll,\n      elCheckAll,\n      toggleCheck,\n      getData\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 7\n  }, this);\n}\n\nexport default ProviderData;\nexport { ContextData };","map":{"version":3,"sources":["/opt/js/storage_sys/contexts/models/data.js"],"names":["React","useState","useEffect","useCallback","ContextData","createContext","ProviderData","props","listRecords","setListRecords","checkAll","setCheckAll","elCheckAll","el","indeterminate","toggleCheck","ids","length","filter","item","Boolean","selected","map","id","newListRecords","includes","selectedRecords","getData","slug","entries","fetch","join","then","res","json","children"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,WAArC,QAAwD,OAAxD;AAEA,MAAMC,WAAW,gBAAGJ,KAAK,CAACK,aAAN,EAApB;;AAEA,SAASC,YAAT,CAAsBC,KAAtB,EAA4B;AACzB,QAAM;AAAA,OAACC,WAAD;AAAA,OAAcC;AAAd,MAAgCR,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM;AAAA,OAACS,QAAD;AAAA,OAAWC;AAAX,MAA0BV,QAAQ,CAAC,KAAD,CAAxC;AAEA,QAAMW,UAAU,GAAGT,WAAW,CAACU,EAAE,IAAI;AAClC,QAAGA,EAAH,EAAM;AACH,UAAGH,QAAQ,KAAK,IAAhB,EAAqB;AAClBG,QAAAA,EAAE,CAACC,aAAH,GAAmB,IAAnB;AACF,OAFD,MAEK;AACFD,QAAAA,EAAE,CAACC,aAAH,GAAmB,KAAnB;AACF;AACH;AACH,GAR6B,EAQ3B,CAACJ,QAAD,CAR2B,CAA9B;;AAUA,QAAMK,WAAW,GAAG,CAACC,GAAG,GAAC,EAAL,KAAU;AAC3BA,IAAAA,GAAG,GAAGA,GAAG,CAACC,MAAJ,GAAaD,GAAb,GACHR,WAAW,CACVU,MADD,CACQC,IAAI,IAAIT,QAAQ,KAAK,IAAb,GAAoBU,OAAO,CAACD,IAAI,CAACE,QAAN,CAA3B,GAA6C,CAACX,QAAD,IAAaU,OAAO,CAACD,IAAI,CAACE,QAAN,CADjF,EAECC,GAFD,CAEKH,IAAI,IAAIA,IAAI,CAACI,EAFlB,CADH;AAIA,QAAIC,cAAc,GAAGhB,WAAW,CAACc,GAAZ,CAAgBH,IAAI,IAAIH,GAAG,CAACS,QAAJ,CAAaN,IAAI,CAACI,EAAlB,oCAA4BJ,IAA5B;AAAiCE,MAAAA,QAAQ,EAAC,CAACF,IAAI,CAACE;AAAhD,SAA4DF,IAApF,CAArB;AACA,QAAIO,eAAe,GAAGF,cAAc,CAACN,MAAf,CAAsBC,IAAI,IAAIA,IAAI,CAACE,QAAnC,CAAtB;AACAV,IAAAA,WAAW,CAACe,eAAe,CAACT,MAAhB,GAAyBO,cAAc,CAACP,MAAxC,GAAiDS,eAAe,CAACT,MAAhB,GAAyB,IAAzB,GAAgC,KAAjF,GAAyF,CAACP,QAA3F,CAAX;AACAD,IAAAA,cAAc,CAACe,cAAD,CAAd;AACF,GATD;;AAWA,QAAMG,OAAO,GAAG,OAAMC,IAAI,GAAC,EAAX,KAAgB;AAC7B,QAAI;AAAEC,MAAAA;AAAF,QAAc,MAAMC,KAAK,CAAE,wBAAuBF,IAAI,CAACG,IAAL,CAAU,GAAV,CAAe,EAAxC,CAAL,CAAgDC,IAAhD,CAAqDC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAA5D,CAAxB;;AACA,QAAGL,OAAH,EAAW;AACRpB,MAAAA,cAAc,CAACoB,OAAD,CAAd;AACAlB,MAAAA,WAAW,CAAC,KAAD,CAAX;AACF;AACH,GAND;;AAQA,sBACG,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAC1BH,MAAAA,WAD0B;AAE1BC,MAAAA,cAF0B;AAG1BC,MAAAA,QAH0B;AAI1BC,MAAAA,WAJ0B;AAK1BC,MAAAA,UAL0B;AAM1BG,MAAAA,WAN0B;AAO1BY,MAAAA;AAP0B,KAA7B;AAAA,cASIpB,KAAK,CAAC4B;AATV;AAAA;AAAA;AAAA;AAAA,UADH;AAaF;;AACD,eAAe7B,YAAf;AACA,SAASF,WAAT","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\n\nconst ContextData = React.createContext()\n\nfunction ProviderData(props){\n   const [listRecords, setListRecords] = useState([])\n   const [checkAll, setCheckAll] = useState(false)\n\n   const elCheckAll = useCallback(el => {\n      if(el){\n         if(checkAll === null){\n            el.indeterminate = true\n         }else{\n            el.indeterminate = false\n         }\n      }\n   }, [checkAll]);\n\n   const toggleCheck = (ids=[])=>{\n      ids = ids.length ? ids :\n         listRecords\n         .filter(item => checkAll === null ? Boolean(item.selected) : !checkAll != Boolean(item.selected))\n         .map(item => item.id)\n      let newListRecords = listRecords.map(item => ids.includes(item.id) ? {...item,selected:!item.selected} : item)\n      let selectedRecords = newListRecords.filter(item => item.selected)\n      setCheckAll(selectedRecords.length < newListRecords.length ? selectedRecords.length ? null : false : !checkAll)\n      setListRecords(newListRecords)\n   }\n\n   const getData = async(slug=[])=>{\n      let { entries } = await fetch(`/api/get-list-folder/${slug.join('/')}`).then(res => res.json())\n      if(entries){\n         setListRecords(entries)\n         setCheckAll(false)\n      }\n   }\n\n   return(\n      <ContextData.Provider value={{\n         listRecords,\n         setListRecords,\n         checkAll,\n         setCheckAll,\n         elCheckAll,\n         toggleCheck,\n         getData,\n      }}>\n         {props.children}\n      </ContextData.Provider>\n   )\n}\nexport default ProviderData\nexport { ContextData }\n"]},"metadata":{},"sourceType":"module"}